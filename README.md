# Wireguard Config Generator

![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen?style=for-the-badge&logo=go&logoColor=white)
![Mutations](https://img.shields.io/badge/Mutations-75_total-blue?style=for-the-badge&logo=code&logoColor=white)

<!-- MUTATION_TESTING_START -->
## Mutation Testing Report

<table>
<tr>
<td>

| Metric | Status | Value | Threshold |
|:------:|:------:|:-----:|:---------:|
| **Efficacy** | Pass | **96.8%** | >= 90% |
| **Coverage** | Fail | **41.3%** | >= 50% |

</td>
<td>

| Status | Count | Percentage |
|:------:|:-----:|:----------:|
| KILLED | 30 | **40.0%** |
| LIVED | 1 | **1.3%** |
| NOT COVERED | 44 | **58.7%** |

</td>
</tr>
</table>

*Generated by Gremlins mutation testing tool*
<!-- MUTATION_TESTING_END -->

## Quickstart

### Install

```bash
go install github.com/xbnz/wireguard-config-generator/cmd/wireguard-config-generator@latest
```

### Required Flags

| Flag | Description | Example |
|------|-------------|---------|
| `--provider` | VPN provider (currently only `nordvpn` supported) | `nordvpn` |
| `--nord-token` | Your NordVPN API token (required for NordVPN) | `YOUR_NORD_TOKEN` |
| `--interface-addresses` | WireGuard interface IP(s) | `10.5.0.2/32` |
| `--output-dir` | Output directory for config files | `config` |

> [!NOTE]
> Interface address for NordVPN is 10.5.0.2/32


### Optional Flags

| Flag | Default | Description |
|------|---------|-------------|
| `--dns` | `1.1.1.1` | Comma-separated DNS servers |
| `--allowed-ips` | `0.0.0.0/0` | Allowed IPs for peer (use `0.0.0.0/0` for full tunnel) |
| `--persistent-keepalive` | `25` | Keepalive interval in seconds |

### Example Usage

**Basic NordVPN:**
```bash
./wireguard-config-generator --provider=nordvpn --nord-token=YOUR_NORD_TOKEN --interface-addresses "10.5.0.2/32" --output-dir config
```

**Custom DNS & allowed IPs:**
```bash
./wireguard-config-generator \
  --provider=nordvpn \
  --nord-token=YOUR_NORD_TOKEN \
  --interface-addresses "10.5.0.2/32" \
  --dns "1.1.1.1,8.8.8.8" \
  --allowed-ips "0.0.0.0/0" \
  --output-dir config
```

**Split tunnel (only route specific traffic through VPN):**
```bash
./wireguard-config-generator \
  --provider=nordvpn \
  --nord-token=YOUR_NORD_TOKEN \
  --interface-addresses "10.5.0.2/32" \
  --allowed-ips "10.0.0.0/8,192.168.1.0/24" \
  --output-dir config
```
